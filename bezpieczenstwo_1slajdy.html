<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bezpiecze≈Ñstwo w sieci ‚Äî Slajdy + Quiz TAK/NIE + Teleturniej (klasa 3)</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#14224b;
      --card:rgba(255,255,255,.10);
      --card2:rgba(255,255,255,.08);
      --border:rgba(255,255,255,.18);
      --text:#ffffff;
      --muted:rgba(255,255,255,.78);
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --btn: rgba(255,255,255,.14);
      --btnHover: rgba(255,255,255,.22);
      --ok:#5eead4;
      --warn:#fbbf24;
      --bad:#fb7185;
    }
    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(122,162,255,.35), transparent 60%),
        radial-gradient(900px 600px at 90% 20%, rgba(94,234,212,.18), transparent 55%),
        radial-gradient(900px 600px at 50% 100%, rgba(251,191,36,.12), transparent 60%),
        linear-gradient(180deg, var(--bg2), var(--bg1));
      overflow:hidden;
    }
    .app{
      height:100%;
      display:grid;
      grid-template-rows: auto 1fr auto;
    }
    header{
      padding:18px 18px 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{ display:flex; align-items:center; gap:12px; min-width:0; }
    .logo{
      width:44px;height:44px;border-radius:16px;
      display:grid;place-items:center;
      background: rgba(255,255,255,.14);
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      font-size:22px; flex:0 0 auto;
    }
    .titles{ min-width:0; }
    .titles h1{
      margin:0;
      font-size: clamp(16px, 2.5vw, 22px);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      letter-spacing:.2px;
    }
    .titles p{
      margin:2px 0 0;
      color:var(--muted);
      font-size:13px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      font-weight:700;
    }
    .topBtns{ display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
    .btn{
      border:1px solid var(--border);
      background: var(--btn);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      font-weight:900;
      display:inline-flex;
      align-items:center;
      gap:8px;
      user-select:none;
      backdrop-filter: blur(6px);
    }
    .btn:hover{ background: var(--btnHover); }

    .stage{ position:relative; padding: 10px 18px 0; display:grid; place-items:center; }
    .slide{
      width:min(980px, 100%);
      min-height: min(560px, calc(100vh - 220px));
      background: linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid var(--border);
      border-radius:26px;
      box-shadow: var(--shadow);
      padding: 22px 22px 18px;
      position:relative;
      overflow:hidden;
    }
    .slide::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(900px 320px at 20% 0%, rgba(255,255,255,.12), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .slide > *{ position:relative; }

    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px; border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.08);
      color:var(--muted);
      font-weight:1000;
      font-size:13px;
      letter-spacing:.2px;
    }
    .bigTitle{
      margin:14px 0 6px;
      font-size: clamp(26px, 4.2vw, 44px);
      line-height:1.05;
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0 0 14px;
      color:var(--muted);
      font-size: clamp(15px, 2.0vw, 18px);
      max-width: 70ch;
      font-weight:700;
    }

    .content{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
      align-items:start;
    }
    @media (max-width: 820px){ .content{ grid-template-columns: 1fr; } }

    .card{
      border:1px solid var(--border);
      border-radius:20px;
      background: rgba(255,255,255,.08);
      padding:16px;
    }
    .card h3{
      margin:0 0 10px;
      font-size:18px;
      display:flex;
      align-items:center;
      gap:10px;
      letter-spacing:.2px;
    }
    .emoji{
      width:44px;height:44px;border-radius:16px;
      display:grid;place-items:center;
      background: rgba(255,255,255,.12);
      border:1px solid var(--border);
      font-size:22px;
      flex:0 0 auto;
    }
    .bullets{
      margin:0;
      padding-left: 20px;
      font-size: clamp(16px, 2.1vw, 18px);
      line-height:1.35;
      font-weight:750;
    }
    .bullets li{ margin: 10px 0; }

    .ruleBox{ display:flex; flex-direction:column; gap:12px; }
    .rule{
      border:1px solid var(--border);
      border-radius:18px;
      background: rgba(255,255,255,.07);
      padding:14px 14px;
      font-size: clamp(16px, 2.1vw, 18px);
      font-weight:900;
    }
    .chip{
      display:inline-block;
      margin-top:10px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      font-weight:1000;
      font-size:13px;
      background: rgba(255,255,255,.06);
      letter-spacing:.2px;
    }
    .chip.ok{ color: var(--ok); }
    .chip.warn{ color: var(--warn); }
    .chip.bad{ color: var(--bad); }

    footer{
      padding: 12px 18px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .nav{ display:flex; gap:10px; align-items:center; }
    .progress{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:center; }
    .dot{
      width:12px;height:12px;border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.10);
      cursor:pointer;
    }
    .dot.active{ background: rgba(255,255,255,.85); }
    .hint{
      color:var(--muted);
      font-size:13px;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      font-weight:750;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size:12px;
      padding:2px 6px;
      border-radius:8px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.08);
      color:var(--text);
      font-weight:900;
    }
    .fade{ animation: fadeIn .18s ease-out; }
    @keyframes fadeIn{ from{ opacity:0; transform: translateY(6px);} to{ opacity:1; transform: translateY(0);} }

    .fsBadge{
      position:fixed; right:14px; bottom:14px;
      padding:8px 10px; border-radius:999px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.28);
      color:var(--muted);
      font-weight:1000;
      font-size:12px;
      backdrop-filter: blur(6px);
      display:none;
    }

    /* ===== QUIZ (ZAWSZE CA≈ÅY ‚Äî scroll w ≈õrodku, je≈õli trzeba) ===== */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.78);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      display:none;
      place-items:center;
      padding:18px;
      z-index:50;
    }
    .modal{
      width:min(820px, 100%);
      border-radius:24px;
      border:1px solid rgba(255,255,255,.25);
      background: rgba(20, 26, 42, .96);
      box-shadow: 0 24px 80px rgba(0,0,0,.55);
      position:relative;
      overflow:hidden;
      outline: 2px solid rgba(255,255,255,.08);
      max-height: 90vh;
      display:flex;
      flex-direction:column;
    }
    .modal::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(900px 320px at 20% 0%, rgba(255,255,255,.10), transparent 60%);
      opacity:.8;
      pointer-events:none;
    }
    .modalTop{
      position:relative;
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      padding:18px 18px 10px;
    }
    .modalBody{
      position:relative;
      padding: 0 18px 14px;
      overflow:auto;
    }
    .modalActions{
      position:relative;
      padding: 12px 18px 18px;
      display:flex;
      justify-content:flex-end;
      gap:10px;
      flex-wrap:wrap;
      border-top:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.14);
    }
    .qTitle{
      margin:0;
      font-size: clamp(18px, 2.8vw, 24px);
      line-height:1.15;
      letter-spacing:.2px;
    }
    .qSub{
      margin:6px 0 0;
      color:var(--muted);
      font-weight:900;
      font-size:13px;
    }
    .qBox{
      margin-top:12px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.55);
      padding:14px;
      font-size: clamp(18px, 3.2vw, 26px);
      font-weight:1100;
      letter-spacing:.2px;
    }
    .qBtns{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:14px;
    }
    .qBtn{
      flex:1 1 160px;
      padding:14px 14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.25);
      background: rgba(255,255,255,.16);
      font-weight:1100;
      font-size:18px;
      cursor:pointer;
      color:#fff;
    }
    .qBtn:hover{ background: rgba(255,255,255,.24); }
    .qBtn.yes{ outline: 2px solid rgba(94,234,212,.25); }
    .qBtn.no{ outline: 2px solid rgba(251,113,133,.20); }
    .feedback{
      margin-top:12px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.10);
      padding:12px 14px;
      display:none;
      gap:10px;
      align-items:flex-start;
    }
    .fbEmoji{
      width:44px;height:44px;border-radius:16px;
      display:grid;place-items:center;
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.22);
      font-size:22px;
      flex:0 0 auto;
    }
    .fbText strong{ display:block; margin-bottom:3px; font-weight:1100; }
    .smallNote{ color:var(--muted); font-size:12px; margin-top:8px; font-weight:900; }

    /* ===== TELETURNIEJ ===== */
    .gamePanel{ display:grid; gap:12px; }
    .scoreBoard{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    @media (max-width: 820px){ .scoreBoard{ grid-template-columns:1fr; } }

    #gameShowMount{
      padding:14px;
      max-height: 60vh;
      overflow:hidden;
    }

    .scoreCard{
      border:1px solid rgba(255,255,255,.25);
      background: rgba(0,0,0,.35);
      border-radius:18px;
      padding:14px;
    }
    .scoreTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-weight:1100;
      letter-spacing:.2px;
    }
    .scoreNum{
      font-size: clamp(34px, 5vw, 54px);
      font-weight:1200;
      margin-top:6px;
    }
    .scoreHint{
      margin-top:6px;
      color: rgba(255,255,255,.80);
      font-size:13px;
      font-weight:900;
    }
    .scoreBtns{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .scoreBtn{
      border:1px solid rgba(255,255,255,.25);
      background: rgba(255,255,255,.16);
      color:#fff;
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      font-weight:1100;
    }
    .scoreBtn:hover{ background: rgba(255,255,255,.24); }
    .smallBtn{ padding:9px 10px; font-size:13px; opacity:.95; }

    .phrasesBox{
      border:1px solid rgba(255,255,255,.25);
      background: rgba(0,0,0,.28);
      border-radius:18px;
      padding:12px;
      max-height: 32vh;
      overflow:auto;
    }
    .phrasesBox h4{
      margin:0 0 10px;
      font-size:16px;
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:1100;
      letter-spacing:.2px;
    }

    /* KLUCZ: zawsze 1 kolumna */
    .phrasesGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:6px;
    }

    .phraseItem{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:10px;
      border-radius:14px;
      border:1px dashed rgba(255,255,255,.20);
      background: rgba(255,255,255,.06);
      font-weight:950;
    }
    .phraseItem input{
      margin-top:2px;
      transform: scale(1.2);
      accent-color: white;
      flex:0 0 auto;
    }
    .phraseText{ flex:1 1 auto; min-width:0; }
    .phraseTag{
      font-size:12px;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.86);
      font-weight:1100;
      margin-left:auto;
      white-space:nowrap;
      flex:0 0 auto;
    }

    /* przycisk na ko≈Ñcu */
    .endActions{
      margin: 10px 0 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
  </style>
</head>

<body>
  <div class="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">üõ°Ô∏è</div>
        <div class="titles">
          <h1 id="headerTitle">Bezpiecze≈Ñstwo w sieci ‚Äî klasa 3</h1>
          <p id="headerSub">Slajdy + Quiz TAK/NIE + Teleturniej</p>
        </div>
      </div>
      <div class="topBtns">
        <button class="btn" id="btnFs" title="Pe≈Çny ekran (F)">‚õ∂ Pe≈Çny ekran</button>
        <button class="btn" id="btnStart" title="Wr√≥ƒá do poczƒÖtku">‚ü≤ Start</button>
      </div>
    </header>

    <main class="stage">
      <section class="slide fade" id="slide"></section>
    </main>

    <footer>
      <div class="nav">
        <button class="btn" id="prev" title="Poprzedni (‚Üê)">‚Üê Wstecz</button>
        <button class="btn" id="next" title="Nastƒôpny (‚Üí)">Dalej ‚Üí</button>
      </div>

      <div class="progress" id="dots" aria-label="Postƒôp slajd√≥w"></div>

      <div class="hint">
        Sterowanie:
        <span class="kbd">‚Üê</span><span class="kbd">‚Üí</span>
        <span class="kbd">F</span> pe≈Çny ekran
        <span class="kbd">Esc</span> wyj≈õcie
      </div>
    </footer>
  </div>

  <div class="fsBadge" id="fsBadge">Tryb pe≈Çnoekranowy</div>

  <!-- QUIZ OVERLAY -->
  <div class="overlay" id="quizOverlay" role="dialog" aria-modal="true" aria-label="Quiz TAK/NIE">
    <div class="modal">
      <div class="modalTop">
        <div>
          <h3 class="qTitle">Quiz TAK / NIE</h3>
          <div class="qSub" id="qMeta">Pytanie do slajdu</div>
        </div>
        <div class="kicker" id="qKicker">QUIZ TAK / NIE</div>
      </div>

      <div class="modalBody">
        <div class="qBox" id="qText">Czy to jest bezpieczne?</div>

        <div class="qBtns">
          <button class="qBtn yes" id="btnYes">TAK ‚úÖ</button>
          <button class="qBtn no" id="btnNo">NIE ‚ùå</button>
        </div>

        <div class="feedback" id="feedback">
          <div class="fbEmoji" id="fbEmoji">‚≠ê</div>
          <div class="fbText">
            <strong id="fbStrong">Dobrze!</strong>
            <div id="fbExplain">Wyja≈õnienie.</div>
            <div class="smallNote">Kliknij ‚ÄûDalej‚Äù, aby kontynuowaƒá.</div>
          </div>
        </div>
      </div>

      <div class="modalActions">
        <button class="btn" id="btnContinue" disabled>‚û°Ô∏è Dalej</button>
      </div>
    </div>
  </div>

  <script>
    const AI_PAGE = "ai.html"; // <- docelowy plik dla przycisku na ostatnim slajdzie

    // ===== SLIDES =====
    const slides = [
      {
        kicker: "ZASADA LEKCJI",
        title: "STOP ‚Äî POMY≈öL ‚Äî ZAPYTAJ DOROS≈ÅEGO",
        subtitle: "W internecie dzia≈Çamy spokojnie i mƒÖdrze. Gdy co≈õ jest dziwne ‚Äî nie klikam i m√≥wiƒô doros≈Çemu.",
        emoji: "üõë",
        leftTitle: "Zapamiƒôtaj",
        bullets: [
          "Gdy kto≈õ prosi o dane ‚Üí m√≥wiƒô: ‚ÄûNie!‚Äù",
          "Gdy co≈õ straszy lub obiecuje nagrodƒô ‚Üí zamykam okno.",
          "Gdy kto≈õ jest niemi≈Çy ‚Üí nie odpisujƒô, blokujƒô, m√≥wiƒô doros≈Çemu."
        ],
        rightTitle: "Trzy super kroki",
        rule: "1) STOP  2) POMY≈öL  3) ZAPYTAJ DOROS≈ÅEGO",
        chip: { text: "To dzia≈Ça zawsze!", type: "ok" }
      },
      {
        kicker: "ASPEKT 1",
        title: "Dane osobowe = skarb",
        subtitle: "To informacje, po kt√≥rych kto≈õ mo≈ºe rozpoznaƒá dziecko. Skarbu nie rozdajesz!",
        emoji: "üßæ",
        leftTitle: "Czego NIE podajemy?",
        bullets: [
          "Imiƒô i nazwisko + szko≈Ça/klasa",
          "Adres domu",
          "Numer telefonu",
          "Lokalizacja (gdzie jestem)",
          "Zdjƒôcia dokument√≥w"
        ],
        rightTitle: "Bezpieczna my≈õl",
        rule: "‚ÄûJe≈õli to m√≥wi, kim jestem i gdzie jestem ‚Äî to jest skarb.‚Äù",
        chip: { text: "Pytam doros≈Çego", type: "warn" }
      },
      {
        kicker: "ASPEKT 2",
        title: "Has≈Ça = sekret jak klucz",
        subtitle: "Has≈Ça nie podajemy nawet koledze. Klucza do domu te≈º by≈õ nie odda≈Ç, prawda?",
        emoji: "üîê",
        leftTitle: "Zasady hase≈Ç",
        bullets: [
          "Has≈Ço jest tajne ‚Äî nie udostƒôpniam go nikomu.",
          "Lepsze has≈Ço jest d≈Çu≈ºsze i ma r√≥≈ºne znaki.",
          "Gdy kto≈õ prosi o has≈Ço ‚Üí m√≥wiƒô doros≈Çemu."
        ],
        rightTitle: "Zdanie-has≈Ço (przyk≈Çad)",
        rule: "‚ÄûLubiƒôKoty!Mam3Klocki‚Äù (d≈Çugie = lepsze)",
        chip: { text: "Has≈Ço to klucz", type: "ok" }
      },
      {
        kicker: "ASPEKT 3",
        title: "Nieznajomi w internecie",
        subtitle: "W sieci kto≈õ mo≈ºe udawaƒá. Dlatego nie umawiamy siƒô i nie podajemy danych.",
        emoji: "üßë‚Äçü¶±‚ùì",
        leftTitle: "Co robiƒô?",
        bullets: [
          "Nie podajƒô danych i nie przechodzƒô na prywatne rozmowy.",
          "Nie wysy≈Çam zdjƒôƒá obcym osobom.",
          "Nie umawiam siƒô na spotkania.",
          "Gdy co≈õ jest dziwne ‚Üí doros≈Çy."
        ],
        rightTitle: "Proste zdanie",
        rule: "‚ÄûNie rozmawiam z obcymi o prywatnych sprawach.‚Äù",
        chip: { text: "STOP i doros≈Çy", type: "warn" }
      },
      {
        kicker: "ASPEKT 4",
        title: "Podejrzane linki i reklamy",
        subtitle: "‚ÄûWygra≈Çe≈õ!‚Äù ‚ÄûKliknij szybko!‚Äù ‚ÄûPobierz za darmo!‚Äù ‚Äî to czƒôsto pu≈Çapki.",
        emoji: "üñ±Ô∏è",
        leftTitle: "Trzy znaki ostrzegawcze",
        bullets: [
          "Nagroda ‚Äûza darmo‚Äù",
          "Po≈õpiech: ‚Äûkliknij ju≈º!‚Äù",
          "Straszenie: ‚Äûkonto zablokowane!‚Äù"
        ],
        rightTitle: "Co robiƒô?",
        rule: "Zamykam okno. Nie klikam. Pytam doros≈Çego.",
        chip: { text: "Nie klikam!", type: "bad" }
      },
      {
        kicker: "ASPEKT 5",
        title: "Mi≈Çe i niemi≈Çe zachowania",
        subtitle: "W sieci te≈º obowiƒÖzuje kultura. Gdy kto≈õ jest niemi≈Çy ‚Äî chroniƒô siebie.",
        emoji: "üí¨",
        leftTitle: "Netykieta",
        bullets: [
          "Piszƒô tak, jakbym m√≥wi≈Ç w klasie.",
          "Nie obra≈ºam, nie wy≈õmiewam.",
          "Pomagam, gdy kto≈õ potrzebuje wsparcia."
        ],
        rightTitle: "Gdy kto≈õ jest niemi≈Çy",
        rule: "Nie odpisujƒô ‚Ä¢ robiƒô screen ‚Ä¢ blokujƒô ‚Ä¢ m√≥wiƒô doros≈Çemu",
        chip: { text: "To nie twoja wina", type: "warn" }
      },
      {
        kicker: "ASPEKT 6",
        title: "Zdjƒôcia i zgoda",
        subtitle: "Zdjƒôcia to te≈º bezpiecze≈Ñstwo. Zawsze pytamy o zgodƒô!",
        emoji: "üì∑",
        leftTitle: "Zasady zdjƒôƒá",
        bullets: [
          "Nie wrzucam zdjƒôƒá innych bez pytania.",
          "Nie wysy≈Çam kompromitujƒÖcych zdjƒôƒá.",
          "Pamiƒôtam: raz wrzucone mo≈ºe krƒÖ≈ºyƒá dalej."
        ],
        rightTitle: "Proste zdanie",
        rule: "‚ÄûNajpierw pytam: czy mogƒô?‚Äù",
        chip: { text: "Szanujƒô innych", type: "ok" }
      },
      {
        kicker: "ASPEKT 7",
        title: "Czas ekranowy i przerwy (zdrowie)",
        subtitle: "Bezpiecze≈Ñstwo to te≈º dbanie o oczy, sen i humor.",
        emoji: "‚è≥",
        leftTitle: "Ma≈Çe zasady",
        bullets: [
          "Robiƒô przerwy i ruszam siƒô.",
          "Patrzƒô daleko przez chwilƒô (odpoczynek oczu).",
          "Przed snem mniej ekran√≥w.",
          "Gdy czujƒô z≈Ço≈õƒá lub zmƒôczenie ‚Äî robiƒô przerwƒô."
        ],
        rightTitle: "Mini-rytua≈Ç 30 sekund",
        rule: "Wsta≈Ñ ‚Ä¢ przeciƒÖgnij siƒô ‚Ä¢ 10 spokojnych oddech√≥w",
        chip: { text: "Zdrowie jest wa≈ºne", type: "ok" }
      },
      {
        kicker: "BONUS 1",
        title: "Detektyw emotek: jak siƒô czujƒô po sieci?",
        subtitle: "Bezpiecze≈Ñstwo to te≈º emocje. Je≈õli po internecie czujƒô siƒô gorzej ‚Äî robiƒô przerwƒô i m√≥wiƒô doros≈Çemu.",
        emoji: "üïµÔ∏è‚Äç‚ôÇÔ∏è",
        leftTitle: "Mini-gra (30 sekund)",
        bullets: [
          "Poka≈º palcami 1‚Äì4: üòä (super) üòê (ok) üòü (smutno) üò° (z≈Ço≈õƒá).",
          "Je≈õli pokazujesz üòü lub üò° ‚Üí robimy przerwƒô.",
          "Uczucia sƒÖ wa≈ºne i normalne."
        ],
        rightTitle: "Zasada",
        rule: "‚ÄûGdy czujƒô siƒô gorzej po sieci ‚Üí PRZERWA + DOROS≈ÅY.‚Äù",
        chip: { text: "Dbam o siebie", type: "ok" }
      },
      {
        kicker: "BONUS 2",
        title: "Zdanie STOP: czy to prosi o dane?",
        subtitle: "ƒÜwiczymy rozpoznawanie pr√≥≈õb o dane. Gdy kto≈õ prosi o prywatne informacje ‚Äî zatrzymujƒô siƒô.",
        emoji: "üõë",
        leftTitle: "Gra na gesty",
        bullets: [
          "Gdy s≈Çyszysz pro≈õbƒô o dane ‚Üí zr√≥b rƒôkami X (STOP).",
          "Gdy to pytanie neutralne ‚Üí kciuk w g√≥rƒô.",
          "Gdy nie wiesz ‚Üí ‚úã i m√≥wisz: ‚ÄûPytam doros≈Çego!‚Äù"
        ],
        rightTitle: "Przyk≈Çad",
        rule: "‚ÄûPodaj numer telefonu / adres / has≈Ço‚Äù ‚Üí STOP!",
        chip: { text: "Nie podajƒô danych", type: "warn" }
      },
      {
        kicker: "BONUS 3",
        title: "Zgoda na zdjƒôcie: czerwone / zielone ≈õwiat≈Ço",
        subtitle: "Zdjƒôcia innych os√≥b wymagajƒÖ zgody. Sprawd≈∫my to w ruchu!",
        emoji: "üö¶",
        leftTitle: "Gra ruchowa",
        bullets: [
          "ZIELONE = krok do przodu (bezpieczne).",
          "CZERWONE = krok do ty≈Çu (niebezpieczne).",
          "Sytuacje: ‚Äûpytam o zgodƒô‚Äù (zielone) / ‚Äûwrzucam bez pytania‚Äù (czerwone)."
        ],
        rightTitle: "Zasada",
        rule: "‚ÄûNajpierw pytam: czy mogƒô?‚Äù",
        chip: { text: "Szanujƒô innych", type: "ok" }
      },
      {
        kicker: "BONUS 4 ‚Äî TELETURNIEJ",
        title: "Teleturniej: Kto bezpieczniejszy? (A vs B)",
        subtitle: "Dwie dru≈ºyny. 10 hase≈Ç. Za dobrƒÖ decyzjƒô punkt! ProwadzƒÖcy przyznaje punkt klikniƒôciem.",
        emoji: "üì∫",
        leftTitle: "Zasady gry",
        bullets: [
          "Dzielimy klasƒô na Dru≈ºynƒô A i Dru≈ºynƒô B.",
          "Czytam has≈Ço ‚Äî dru≈ºyny pokazujƒÖ: üëç OK / üëé NIE OK / ‚úã ‚ÄûPytam doros≈Çego‚Äù.",
          "Punkt dostaje dru≈ºyna, kt√≥ra szybciej i poprawnie zareaguje.",
          "Gramy 10 hase≈Ç. Wygrywa dru≈ºyna z wiƒôkszƒÖ liczbƒÖ punkt√≥w!"
        ],
        isGameShow: true
      },
      {
        kicker: "BONUS 5",
        title: "Misja SUPERBOHATERA: 3 ruchy obrony",
        subtitle: "Gdy w sieci dzieje siƒô co≈õ z≈Çego ‚Äî robimy trzy proste ruchy jak superbohater.",
        emoji: "ü¶∏",
        leftTitle: "Trzy ruchy (wszyscy razem)",
        bullets: [
          "1) TARCZA üõ°Ô∏è ‚Äî robiƒô STOP (rƒôce jak tarcza)",
          "2) KROK W TY≈Å üë£ ‚Äî zamykam/wychodzƒô",
          "3) SYGNA≈Å üì¢ ‚Äî m√≥wiƒô doros≈Çemu"
        ],
        rightTitle: "Has≈Ço dru≈ºyny",
        rule: "‚ÄûTARCZA ‚Äî KROK W TY≈Å ‚Äî SYGNA≈Å!‚Äù",
        chip: { text: "Mam supermoc!", type: "ok" }
      },
      {
        kicker: "FINA≈Å",
        title: "Kodeks Bezpiecznego Internauty",
        subtitle: "Mo≈ºecie powt√≥rzyƒá g≈Ço≈õno i zrobiƒá plakat w klasie üôÇ",
        emoji: "‚≠ê",
        leftTitle: "Nasze zasady (6)",
        bullets: [
          "Nie podajƒô danych i hase≈Ç.",
          "Nie klikam podejrzanych link√≥w.",
          "Nie rozmawiam z nieznajomymi o prywatnych sprawach.",
          "Gdy kto≈õ jest niemi≈Çy ‚Äî nie odpisujƒô, blokujƒô, m√≥wiƒô doros≈Çemu.",
          "Pytam o zgodƒô na zdjƒôcia.",
          "Robiƒô przerwy od ekranu."
        ],
        rightTitle: "Has≈Ço na wyj≈õcie",
        rule: "STOP ‚Äî POMY≈öL ‚Äî ZAPYTAJ DOROS≈ÅEGO",
        chip: { text: "Brawo! üëè", type: "ok" }
      }
    ];

    // ===== QUIZ TAK/NIE (wy≈õwietlany ‚Äúpo slajdzie‚Äù, czyli przed przej≈õciem dalej) =====
    const quiz = {
      1: { q: "Czy wolno podawaƒá w grze sw√≥j adres domu?", a: "N", explain: "Nie. Adres to dana osobowa ‚Äî skarb. Zawsze chronimy takie informacje." },
      2: { q: "Czy mogƒô podaƒá koledze swoje has≈Ço, bo jest najlepszym kolegƒÖ?", a: "N", explain: "Nie. Has≈Ço to sekret jak klucz. Has≈Ça nie podajemy nikomu." },
      3: { q: "Czy w internecie ka≈ºdy jest na pewno tym, za kogo siƒô podaje?", a: "N", explain: "Nie. Kto≈õ mo≈ºe udawaƒá, dlatego nie podajemy danych i pytamy doros≈Çego." },
      4: { q: "Czy warto kliknƒÖƒá reklamƒô ‚ÄûWygra≈Çe≈õ! Kliknij szybko!‚Äù?", a: "N", explain: "Nie. Po≈õpiech i nagroda to czƒôsto pu≈Çapki. Najlepiej zamknƒÖƒá i nie klikaƒá." },
      5: { q: "Gdy kto≈õ jest niemi≈Çy w sieci, czy najlepiej mu odpisaƒá i siƒô k≈Ç√≥ciƒá?", a: "N", explain: "Nie. Nie odpisujemy. Robimy screen, blokujemy i m√≥wimy doros≈Çemu." },
      6: { q: "Czy mogƒô wrzuciƒá zdjƒôcie kolegi bez pytania, je≈õli jest fajne?", a: "N", explain: "Nie. Zawsze pytamy o zgodƒô, bo to prywatno≈õƒá." },
      7: { q: "Czy przerwy od ekranu pomagajƒÖ oczom i g≈Çowie?", a: "T", explain: "Tak. Przerwy, ruch i odpoczynek dla oczu to te≈º bezpiecze≈Ñstwo." },
      8: { q: "Czy gdy po internecie czujƒô z≈Ço≈õƒá lub smutek, warto zrobiƒá przerwƒô i powiedzieƒá doros≈Çemu?", a: "T", explain: "Tak. Emocje m√≥wiƒÖ, ≈ºe potrzebujesz przerwy i wsparcia." },
      9: { q: "Czy mogƒô podaƒá numer telefonu w grze, je≈õli kto≈õ obieca prezent?", a: "N", explain: "Nie. Numer telefonu to dane osobowe ‚Äî nie podajemy go." },
      10:{ q: "Czy zawsze pytamy o zgodƒô, zanim wrzucimy czyje≈õ zdjƒôcie?", a: "T", explain: "Tak. Zgoda jest obowiƒÖzkowa ‚Äî to szacunek i bezpiecze≈Ñstwo." },
      11:{ q: "Czy je≈õli nie jestem pewny w internecie, mogƒô wybraƒá ‚úã ‚ÄûPytam doros≈Çego‚Äù?", a: "T", explain: "Tak. Gdy masz wƒÖtpliwo≈õci, nie klikaj ‚Äî pytaj doros≈Çego." },
      12:{ q: "Czy plan superbohatera to: STOP (tarcza) ‚Üí zamknij/wyjd≈∫ ‚Üí powiedz doros≈Çemu?", a: "T", explain: "Tak. To prosta i bezpieczna procedura." }
    };

    // ===== UI HOOKS =====
    let idx = 0;
    const slideEl = document.getElementById('slide');
    const dotsEl = document.getElementById('dots');
    const headerTitle = document.getElementById('headerTitle');
    const headerSub = document.getElementById('headerSub');

    // QUIZ elements
    const quizOverlay = document.getElementById('quizOverlay');
    const qMeta = document.getElementById('qMeta');
    const qKicker = document.getElementById('qKicker');
    const qText = document.getElementById('qText');
    const btnYes = document.getElementById('btnYes');
    const btnNo = document.getElementById('btnNo');
    const feedback = document.getElementById('feedback');
    const fbEmoji = document.getElementById('fbEmoji');
    const fbStrong = document.getElementById('fbStrong');
    const fbExplain = document.getElementById('fbExplain');
    const btnContinue = document.getElementById('btnContinue');

    let pendingNext = null;
    let quizOpen = false;

    function chipClass(type){
      if(type === "ok") return "chip ok";
      if(type === "warn") return "chip warn";
      if(type === "bad") return "chip bad";
      return "chip";
    }

    function renderDots(){
      dotsEl.innerHTML = "";
      slides.forEach((_, i) => {
        const d = document.createElement('div');
        d.className = "dot" + (i === idx ? " active" : "");
        d.title = `Slajd ${i+1}`;
        d.addEventListener('click', () => go(i, {fromDot:true}));
        dotsEl.appendChild(d);
      });
    }

    function miniQuestion(i){
      const qs = [
        "Co robisz, gdy co≈õ wydaje siƒô dziwne w internecie?",
        "Czy adres domu to dana osobowa?",
        "Czy has≈Ço mo≈ºna komu≈õ podaƒá?",
        "Co robisz, gdy pisze obca osoba?",
        "Jakie sƒÖ 3 znaki ostrzegawcze reklam?",
        "Co robisz, gdy kto≈õ jest niemi≈Çy?",
        "Czy zawsze pytamy o zgodƒô na zdjƒôcia?",
        "Co pomaga w przerwach od ekranu?",
        "JakƒÖ emotkƒô pokazujesz po sieci i co robisz, gdy jest üòü?",
        "Jak reagujesz na pro≈õbƒô o numer telefonu/adres/has≈Ço?",
        "Co oznacza czerwone ≈õwiat≈Ço w naszej grze?",
        "W teleturnieju: za co dostaje siƒô punkt?",
        "Poka≈º ruch ‚ÄûTARCZA‚Äù i powiedz, co oznacza.",
        "Powiedz jednƒÖ zasadƒô z kodeksu."
      ];
      return qs[i] || "Powiedz jednƒÖ wa≈ºnƒÖ zasadƒô bezpiecze≈Ñstwa w sieci.";
    }

    // ===== GAME SHOW STATE =====
    let gameState = { a: 0, b: 0, played: Array(10).fill(false) };
    const gamePhrases = [
      { text: "Podaj has≈Ço do gry ‚Äî dam ci prezent", tag: "PU≈ÅAPKA ‚ùå" },
      { text: "Nie wiem ‚Üí pytam doros≈Çego", tag: "DOBRE ‚úÖ" },
      { text: "Kliknij szybko! Wygra≈Çe≈õ!", tag: "PU≈ÅAPKA ‚ùå" },
      { text: "Ustaw prywatno≈õƒá / konto prywatne", tag: "DOBRE ‚úÖ" },
      { text: "Wy≈õlij adres, to ci wy≈õlƒô nagrodƒô", tag: "PU≈ÅAPKA ‚ùå" },
      { text: "Zablokuj niemi≈ÇƒÖ osobƒô", tag: "DOBRE ‚úÖ" },
      { text: "Wy≈õlij swoje zdjƒôcie obcej osobie", tag: "PU≈ÅAPKA ‚ùå" },
      { text: "Zr√≥b przerwƒô, gdy czujesz z≈Ço≈õƒá", tag: "DOBRE ‚úÖ" },
      { text: "Podaj numer telefonu na czacie", tag: "PU≈ÅAPKA ‚ùå" },
      { text: "Powiedz doros≈Çemu, gdy co≈õ ciƒô przestraszy", tag: "DOBRE ‚úÖ" }
    ];
    let lastAction = null;

    function safeTag(p){
      return (p && typeof p.tag === "string" && p.tag.trim().length) ? p.tag : "";
    }

    function mountGameShow(){
      const mount = document.getElementById("gameShowMount");
      if(!mount) return;

      mount.innerHTML = `
        <div class="gamePanel">
          <div class="scoreBoard">
            <div class="scoreCard">
              <div class="scoreTitle">Dru≈ºyna A <span class="phraseTag">A</span></div>
              <div class="scoreNum" id="scoreA">${gameState.a}</div>
              <div class="scoreBtns">
                <button class="scoreBtn" id="aPlus">A +1</button>
              </div>
              <div class="scoreHint">Punkt za szybkƒÖ i poprawnƒÖ decyzjƒô üëç/üëé/‚úã</div>
            </div>

            <div class="scoreCard">
              <div class="scoreTitle">Dru≈ºyna B <span class="phraseTag">B</span></div>
              <div class="scoreNum" id="scoreB">${gameState.b}</div>
              <div class="scoreBtns">
                <button class="scoreBtn" id="bPlus">B +1</button>
              </div>
              <div class="scoreHint">ProwadzƒÖcy przyznaje punkt klikniƒôciem</div>
            </div>
          </div>

          <div class="scoreBtns">
            <button class="scoreBtn smallBtn" id="undo">‚Ü© Cofnij punkt</button>
            <button class="scoreBtn smallBtn" id="reset">‚ü≤ Reset</button>
          </div>

          <div class="phrasesBox">
            <h4>üó£Ô∏è 10 hase≈Ç do przeczytania (przewi≈Ñ listƒô)</h4>
            <div class="phrasesGrid">
              ${gamePhrases.map((p, i) => `
                <label class="phraseItem">
                  <input type="checkbox" ${gameState.played[i] ? "checked" : ""} data-i="${i}">
                  <span class="phraseText">${i+1}) ${p.text}</span>
                  ${safeTag(p) ? `<span class="phraseTag">${safeTag(p)}</span>` : ``}
                </label>
              `).join("")}
            </div>
          </div>
        </div>
      `;

      const scoreA = mount.querySelector("#scoreA");
      const scoreB = mount.querySelector("#scoreB");
      const updateScores = () => { scoreA.textContent = gameState.a; scoreB.textContent = gameState.b; };

      mount.querySelector("#aPlus").addEventListener("click", () => { gameState.a += 1; lastAction = "a"; updateScores(); });
      mount.querySelector("#bPlus").addEventListener("click", () => { gameState.b += 1; lastAction = "b"; updateScores(); });

      mount.querySelector("#undo").addEventListener("click", () => {
        if(lastAction === "a" && gameState.a > 0) gameState.a -= 1;
        if(lastAction === "b" && gameState.b > 0) gameState.b -= 1;
        lastAction = null; updateScores();
      });

      mount.querySelector("#reset").addEventListener("click", () => {
        gameState = { a: 0, b: 0, played: Array(10).fill(false) };
        lastAction = null;
        mountGameShow();
      });

      mount.querySelectorAll('input[type="checkbox"][data-i]').forEach(cb => {
        cb.addEventListener("change", (e) => {
          const i = Number(e.target.getAttribute("data-i"));
          gameState.played[i] = e.target.checked;
        });
      });
    }

    function render(){
      const s = slides[idx];
      headerTitle.textContent = `Bezpiecze≈Ñstwo w sieci ‚Äî slajd ${idx+1}/${slides.length}`;
      headerSub.textContent = s.title;

      slideEl.classList.remove('fade');
      void slideEl.offsetWidth;
      slideEl.classList.add('fade');

      const isLast = (idx === slides.length - 1);

      const endButton = isLast ? `
        <div class="endActions">
          <button class="btn" id="goAi">‚û°Ô∏è Przejd≈∫ do AI (ai.html)</button>
        </div>
      ` : ``;

      const rightColumn = s.isGameShow ? `
        <div class="ruleBox">
          <div id="gameShowMount" class="card"></div>
        </div>
      ` : `
        <div class="ruleBox">
          <div class="card">
            <h3><span class="emoji" aria-hidden="true">üß†</span>${s.rightTitle}</h3>
            <div class="rule">${s.rule}</div>
            <span class="${chipClass(s.chip.type)}">${s.chip.text}</span>
          </div>

          <div class="card">
            <h3><span class="emoji" aria-hidden="true">üéØ</span>Mini-pytanie do klasy</h3>
            <div class="rule">${miniQuestion(idx)}</div>
          </div>
        </div>
      `;

      slideEl.innerHTML = `
        <div class="kicker">${s.kicker}</div>
        <h2 class="bigTitle">${s.emoji ? (s.emoji + " ") : ""}${s.title}</h2>
        <p class="subtitle">${s.subtitle}</p>
        ${endButton}

        <div class="content">
          <div class="card">
            <h3><span class="emoji" aria-hidden="true">${s.emoji || "üìå"}</span>${s.leftTitle}</h3>
            <ul class="bullets">
              ${s.bullets.map(b => `<li>${b}</li>`).join("")}
            </ul>
          </div>

          ${rightColumn}
        </div>
      `;

      renderDots();
      updateNavButtons();

      if (s.isGameShow) mountGameShow();

      if (isLast) {
        const btn = document.getElementById("goAi");
        if (btn) btn.addEventListener("click", () => { window.location.href = AI_PAGE; });
      }
    }

    function updateNavButtons(){
      const prevBtn = document.getElementById('prev');
      const nextBtn = document.getElementById('next');

      prevBtn.disabled = (idx === 0);
      nextBtn.disabled = (idx === slides.length - 1);

      [prevBtn, nextBtn].forEach(b=>{
        if(b.disabled){ b.style.opacity=.55; b.style.cursor="not-allowed"; }
        else { b.style.opacity=1; b.style.cursor="pointer"; }
      });
    }

    function go(i, opts={}){
      idx = Math.max(0, Math.min(slides.length - 1, i));
      render();
      if(opts.fromDot) closeQuiz();
    }

    function shouldQuizForSlide(slideIndex){
      if(slideIndex === 0) return false;
      if(slideIndex === slides.length - 1) return false;
      return !!quiz[slideIndex];
    }

    // ===== QUIZ =====
    function openQuizFor(slideIndex, onContinue){
      const q = quiz[slideIndex];
      if(!q){ onContinue?.(); return; }

      quizOpen = true;
      pendingNext = onContinue;

      qMeta.textContent = `Pytanie do slajdu ${slideIndex+1}: ${slides[slideIndex].title}`;
      qKicker.textContent = "QUIZ TAK / NIE";
      qText.textContent = q.q;

      feedback.style.display = "none";
      btnContinue.disabled = true;

      quizOverlay.style.display = "grid";
      btnYes.focus();
    }

    function closeQuiz(){
      quizOpen = false;
      pendingNext = null;
      quizOverlay.style.display = "none";
    }

    function answerQuiz(ans){
      const q = quiz[idx];
      if(!q) return;

      const correct = (ans === q.a);
      feedback.style.display = "flex";

      if(correct){
        fbEmoji.textContent = "‚úÖ";
        fbStrong.textContent = "Dobrze!";
        fbExplain.textContent = q.explain;
      }else{
        fbEmoji.textContent = "‚ùó";
        fbStrong.textContent = "Prawie ‚Äî spr√≥bujmy jeszcze raz.";
        fbExplain.textContent = "Podpowied≈∫: przypomnij sobie zasadƒô z tego slajdu. " + q.explain;
      }

      btnContinue.disabled = false;
      btnContinue.focus();
    }

    btnYes.addEventListener('click', ()=>answerQuiz("T"));
    btnNo.addEventListener('click', ()=>answerQuiz("N"));
    btnContinue.addEventListener('click', ()=>{
      const fn = pendingNext;
      closeQuiz();
      fn?.();
    });

    function next(){
      if(idx >= slides.length - 1) return;
      const target = idx + 1;

      if(shouldQuizForSlide(idx) && !quizOpen){
        openQuizFor(idx, ()=>go(target));
        return;
      }
      go(target);
    }

    function prev(){
      if(idx <= 0) return;
      go(idx - 1);
    }

    document.getElementById('next').addEventListener('click', next);
    document.getElementById('prev').addEventListener('click', prev);
    document.getElementById('btnStart').addEventListener('click', () => { closeQuiz(); go(0); });

    // ===== FULLSCREEN =====
    const fsBadge = document.getElementById('fsBadge');
    function isFs(){ return !!document.fullscreenElement; }
    async function toggleFs(){
      if(!isFs()){
        await document.documentElement.requestFullscreen?.();
      }else{
        await document.exitFullscreen?.();
      }
      updateFsUI();
    }
    function updateFsUI(){
      const btn = document.getElementById('btnFs');
      if(isFs()){
        btn.textContent = "‚õ∂ Wyjd≈∫ z pe≈Çnego ekranu";
        fsBadge.style.display = "block";
      }else{
        btn.textContent = "‚õ∂ Pe≈Çny ekran";
        fsBadge.style.display = "none";
      }
    }
    document.getElementById('btnFs').addEventListener('click', toggleFs);
    document.addEventListener('fullscreenchange', updateFsUI);

    // ===== KEYBOARD =====
    document.addEventListener('keydown', (e) => {
      if(quizOpen){
        if(e.key === "Escape") closeQuiz();
        if(e.key === "Enter" && !btnContinue.disabled) btnContinue.click();
        if(e.key.toLowerCase() === "t") btnYes.click();
        if(e.key.toLowerCase() === "n") btnNo.click();
        return;
      }
      if(e.key === "ArrowRight") next();
      if(e.key === "ArrowLeft") prev();
      if(e.key.toLowerCase() === "f") toggleFs();
      if(e.key === "Home") go(0);
      if(e.key === "End") go(slides.length - 1);
    });

    // Touch swipe
    let startX = null;
    document.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; }, {passive:true});
    document.addEventListener('touchend', (e) => {
      if(startX === null || quizOpen) return;
      const endX = e.changedTouches[0].clientX;
      const dx = endX - startX;
      if(Math.abs(dx) > 60){
        if(dx < 0) next(); else prev();
      }
      startX = null;
    }, {passive:true});

    quizOverlay.addEventListener('click', (e)=>{
      if(e.target === quizOverlay) closeQuiz();
    });

    render();
    updateFsUI();
  </script>
</body>
</html>
